<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of GuppyScreen.

  GuppyScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GuppyScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GuppyScreen. If not, see <https://www.gnu.org/licenses/>.
-->

<component>
	<!-- Now references global constants from globals.xml -->
	<view extends="lv_obj" width="100%" height="100%" style_bg_color="#panel_bg" style_pad_all="0" style_border_width="0" flex_flow="column">
		<!-- Top section: Printer visualization -->
		<lv_obj width="100%" flex_grow="2" style_bg_opa="0%" style_border_width="0" style_pad_all="#padding_normal" flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center" style_pad_gap="#padding_normal">
			<!-- Printer Image (size and scaling set dynamically in C++ based on screen size) -->
			<lv_image name="printer_image" src="A:assets/images/printer_400.png" width="#printer_img_size" height="#printer_img_size" align="center"/>

			<!-- Status Message with accent bar (flex-grows to fill available space) -->
			<lv_obj flex_grow="1" style_bg_opa="0%" style_border_width="0" style_pad_all="0" flex_flow="row" style_flex_cross_place="center" style_pad_gap="#accent_bar_gap">
				<!-- Vertical accent bar (height dynamic, uses align_self stretch) -->
				<lv_obj name="status_accent_bar" width="#accent_bar_width" style_align_self="stretch" style_bg_color="#primary_color" style_bg_opa="255" style_radius="2" style_border_width="0" style_pad_all="0" style_pad_top="8" style_pad_bottom="8"/>

				<!-- Status text (flex-grows to fill remaining width) -->
				<lv_label name="status_text_label" flex_grow="1" bind_text="status_text" style_text_color="#text_primary" style_text_font="#font_heading" style_text_align="left"/>
			</lv_obj>
		</lv_obj>

		<!-- Bottom section: Info cards -->
		<lv_obj width="100%" flex_grow="1" style_bg_opa="0%" style_border_width="0" style_pad_top="#padding_normal" style_pad_bottom="#padding_normal" style_pad_left="8" style_pad_right="8" flex_flow="row" flex_align="space_evenly center center">
			<!-- Print Files Card -->
			<lv_obj width="#card_width" height="100%" style_bg_color="#card_bg" style_radius="#card_radius" style_border_width="0" style_pad_all="#padding_normal" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">
				<lv_label text="Print Files" style_text_color="#text_primary" style_text_font="#font_body"/>
			</lv_obj>

			<!-- Status Card (Temperature, Network, Light) - Material Design icons -->
			<lv_obj name="status_card" width="#card_width" height="100%" style_bg_color="#card_bg" style_radius="#card_radius" style_border_width="0" style_pad_all="#padding_normal" flex_flow="row" style_flex_cross_place="center">
				<!-- Temperature display - icon on top, text below -->
				<lv_obj flex_grow="1" style_align_self="stretch" style_bg_opa="0%" style_border_width="0" style_pad_all="0" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">
					<lv_image name="temp_icon" src="mat_heater" align="center" style_img_recolor="#text_secondary" style_img_recolor_opa="100%"/>
					<lv_label name="temp_text_label" bind_text="temp_text" style_text_color="#text_primary" style_text_font="#font_body" style_text_align="center" width="100%"/>
				</lv_obj>

				<!-- Vertical divider (dynamically sized to leave 12px top/bottom padding) -->
				<lv_obj name="divider1" width="1" style_align_self="stretch" style_bg_color="#text_secondary" style_bg_opa="50%" style_border_width="0" style_pad_all="0" style_pad_top="12" style_pad_bottom="12"/>

				<!-- Network status - icon on top, label below (centered) -->
				<lv_obj flex_grow="1" style_align_self="stretch" style_bg_opa="0%" style_border_width="0" style_pad_all="0" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">
					<lv_image name="network_icon" src="mat_network" width="48" height="48" zoom="192" align="center" style_img_recolor="#primary_color" style_img_recolor_opa="100%"/>
					<lv_label name="network_label" text="Wi-Fi" style_text_color="#text_secondary" style_text_font="#font_body" style_text_align="center" width="100%"/>
				</lv_obj>

				<!-- Vertical divider (dynamically sized to leave 12px top/bottom padding) -->
				<lv_obj name="divider2" width="1" style_align_self="stretch" style_bg_color="#text_secondary" style_bg_opa="50%" style_border_width="0" style_pad_all="0" style_pad_top="12" style_pad_bottom="12"/>

				<!-- Light control button - icon only -->
				<lv_obj flex_grow="1" style_align_self="stretch" style_bg_opa="0%" style_border_width="0" style_pad_all="0" flag_clickable="true" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">
					<lv_image name="light_icon" src="mat_light" width="48" height="48" zoom="192" align="center" style_img_recolor="#text_secondary" style_img_recolor_opa="100%"/>
					<lv_event-call_function trigger="clicked" callback="light_toggle_cb"/>
				</lv_obj>
			</lv_obj>
		</lv_obj>
	</view>
</component>
