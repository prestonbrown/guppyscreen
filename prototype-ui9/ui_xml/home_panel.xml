<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of HelixScreen.

  HelixScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  HelixScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with HelixScreen. If not, see <https://www.gnu.org/licenses/>.
-->
<component>
	<!-- Now references global constants from globals.xml -->
	<view
		extends="lv_obj"
		width="100%"
		height="100%"
		style_bg_color="#panel_bg"
		style_pad_all="0"
		style_border_width="0"
		flex_flow="column"
	>
		<!-- Top section: Printer visualization -->
		<lv_obj
			width="100%"
			flex_grow="17"
			style_bg_opa="0%"
			style_border_width="0"
			style_pad_all="#padding_normal"
			flex_flow="row"
			style_flex_main_place="center"
			style_flex_cross_place="center"
		>
			<!-- Printer Image (size and scaling set dynamically in C++ based on screen size) -->
			<lv_image
				name="printer_image"
				src="A:assets/images/printer_400.png"
				width="#printer_img_size"
				height="#printer_img_size"
				align="center"
			/>

			<!-- Status Message with accent bar (flex-grows to fill available space) -->
			<lv_obj
				flex_grow="1"
				style_bg_opa="0%"
				style_border_width="0"
				style_pad_all="0"
				flex_flow="row"
				style_flex_cross_place="center"
				style_pad_gap="#accent_bar_gap"
			>
				<!-- Vertical accent bar (height fills container) -->
				<lv_obj
					name="status_accent_bar"
					width="#accent_bar_width"
					height="100%"
					style_bg_color="#primary_color"
					style_bg_opa="255"
					style_radius="2"
					style_border_width="0"
					style_pad_all="0"
				/>

				<!-- Status text container with padding for breathing room -->
				<lv_obj
					flex_grow="1"
					style_bg_opa="0%"
					style_border_width="0"
					style_pad_ver="8"
					style_pad_hor="0"
				>
					<lv_label
						name="status_text_label"
						bind_text="status_text"
						style_text_color="#text_primary"
						style_text_font="#font_heading"
						style_text_align="left"
					/>
				</lv_obj>
			</lv_obj>
		</lv_obj>

		<!-- Bottom section: Info cards -->
		<lv_obj
			width="100%"
			flex_grow="10"
			style_bg_opa="0%"
			style_border_width="0"
			style_pad_top="#padding_normal"
			style_pad_bottom="#padding_normal"
			style_pad_left="8"
			style_pad_right="8"
			flex_flow="row"
			style_pad_gap="#gap_normal"
			align="center"
		>
			<!-- Print Files Card -->
			<lv_obj
				flex_grow="1"
				height="100%"
				style_bg_color="#card_bg"
				style_radius="#card_radius"
				style_border_width="0"
				style_pad_all="#padding_normal"
				flex_flow="column"
				style_flex_main_place="center"
				style_flex_cross_place="center"
			>
				<lv_label text="Print Files" style_text_color="#text_primary" style_text_font="#font_body" />
			</lv_obj>

			<!-- Status Card (Temperature, Network, Light) -->
			<lv_obj
				name="status_card"
				flex_grow="1"
				height="100%"
				style_bg_color="#card_bg"
				style_radius="#card_radius"
				style_border_width="0"
				style_pad_all="0"
				flex_flow="row"
				style_flex_cross_place="center"
			>
				<!-- Temperature display - icon on top, text below -->
				<lv_obj
					flex_grow="1"
					style_bg_opa="0%"
					style_border_width="0"
					style_pad_all="0"
					flex_flow="column"
					style_flex_main_place="center"
					style_flex_cross_place="center"
				>
					<icon name="temp_icon" src="mat_extruder" variant="secondary" />
					<lv_label
						name="temp_text_label"
						bind_text="temp_text"
						style_text_color="#text_primary"
						style_text_font="#font_body"
						style_text_align="center"
						width="100%"
					/>
				</lv_obj>

				<!-- Vertical divider (margin removed for testing) -->
				<lv_obj
					name="divider1"
					width="1"
					height="100%"
					style_bg_color="#text_secondary"
					style_bg_opa="50%"
					style_border_width="0"
					style_pad_all="0"
				style_margin_ver="12"
				/>

				<!-- Network status - icon on top, label below (centered) -->
				<lv_obj
					flex_grow="1"
					style_bg_opa="0%"
					style_border_width="0"
					style_pad_all="0"
					flex_flow="column"
					style_flex_main_place="center"
					style_flex_cross_place="center"
				>
					<lv_label
						name="network_icon"
						bind_text="network_icon"
						style_text_font="fa_icons_48"
						style_text_align="center"
						width="100%"
					/>
					<lv_label
						name="network_label"
						bind_text="network_label"
						style_text_color="#text_secondary"
						style_text_font="#font_body"
						style_text_align="center"
						width="100%"
					/>
				</lv_obj>

				<!-- Vertical divider (margin removed for testing) -->
				<lv_obj
					name="divider2"
					width="1"
					height="100%"
					style_bg_color="#text_secondary"
					style_bg_opa="50%"
					style_border_width="0"
					style_pad_all="0"
				style_margin_ver="12"
				/>

				<!-- Light control button - icon only -->
				<lv_button
					name="light_button"
					flex_grow="1"
					style_bg_opa="0%"
					style_border_width="0"
					style_pad_all="0"
					style_shadow_width="0"
				>
					<lv_image name="light_icon" src="mat_light" width="64" height="64" align="center" />
					<!-- NOTE: LVGL source uses lv_event-call_function, NOT event_cb (despite what web docs say) -->
					<lv_event-call_function trigger="clicked" callback="light_toggle_cb"/>
				</lv_button>
			</lv_obj>
		</lv_obj>
	</view>
</component>
