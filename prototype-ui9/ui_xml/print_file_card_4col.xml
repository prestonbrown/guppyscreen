<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of GuppyScreen.

  GuppyScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GuppyScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GuppyScreen. If not, see <https://www.gnu.org/licenses/>.
-->

<component>
	<!-- Print File Card Component - 4 Column Layout
	     For 800 screens: 151px wide, 127px thumbnails
	     Displays a single print file with thumbnail, filename, and metadata
	-->

	<api>
		<prop type="string" name="thumbnail_src"/>
		<prop type="string" name="filename"/>
		<prop type="string" name="print_time"/>
		<prop type="string" name="filament_weight"/>
	</api>

	<consts>
		<!-- Consistent spacing values -->
		<px name="filename_top_pad" value="8"/>
		<px name="metadata_top_pad" value="4"/>
		<px name="icon_text_gap" value="3"/>
		<px name="metadata_item_gap" value="6"/>

		<!-- Thumbnail styling -->
		<px name="thumbnail_radius" value="6"/>

		<!-- Metadata label minimum width to prevent crushing -->
		<px name="metadata_label_min_width" value="35"/>
	</consts>

	<view extends="lv_obj"
	      width="#print_file_card_width_4col"
	      height="#print_file_card_height_4col"
	      style_bg_color="#card_bg"
	      style_radius="#card_radius"
	      style_border_width="0"
	      style_pad_all="#print_file_card_padding"
	      flex_flow="column"
	      flag_clickable="true"
	      flag_scrollable="false">

		<!-- Thumbnail image (square, responsive width) -->
		<lv_image src="$thumbnail_src"
		          width="100%"
		          height="#print_file_card_thumb_4col"
		          style_radius="#thumbnail_radius"
		          style_bg_color="#print_file_card_thumbnail_bg"
		          name="thumbnail"/>

		<!-- Filename label (single line, truncated with ...) -->
		<lv_label text="$filename"
		          width="100%"
		          long_mode="dots"
		          style_text_color="#text_primary"
		          style_text_font="montserrat_14"
		          style_pad_top="#filename_top_pad"
		          name="filename_label"/>

		<!-- Metadata row (horizontal layout, responsive) -->
		<lv_obj width="100%"
		        style_bg_opa="0"
		        style_border_width="0"
		        style_pad_all="0"
		        style_pad_top="#metadata_top_pad"
		        flex_flow="row"
		        style_pad_gap="#metadata_item_gap"
		        flex_grow="1"
		        name="metadata_row">

			<!-- Print time (icon + text) -->
			<lv_obj flex_grow="1"
			        height="100%"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_all="0"
			        flex_flow="row"
			        style_pad_gap="#icon_text_gap"
			        style_flex_cross_place="center">
				<icon src="mat_clock"
				      size="xs"
				      variant="accent"/>
				<lv_label text="$print_time"
				          flex_grow="1"
				          style_min_width="#metadata_label_min_width"
				          style_text_color="#text_secondary"
				          style_text_font="montserrat_14"
				          name="time_label"/>
			</lv_obj>

			<!-- Filament weight (icon + text) -->
			<lv_obj flex_grow="1"
			        height="100%"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_all="0"
			        flex_flow="row"
			        style_pad_gap="#icon_text_gap"
			        style_flex_cross_place="center">
				<icon src="mat_layers"
				      size="xs"
				      variant="accent"/>
				<lv_label text="$filament_weight"
				          flex_grow="1"
				          style_min_width="#metadata_label_min_width"
				          style_text_color="#text_secondary"
				          style_text_font="montserrat_14"
				          name="filament_label"/>
			</lv_obj>
		</lv_obj>
	</view>
</component>
