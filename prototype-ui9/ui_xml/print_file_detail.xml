<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of GuppyScreen.

  GuppyScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GuppyScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GuppyScreen. If not, see <https://www.gnu.org/licenses/>.
-->

<component>
	<!-- Print File Detail View - Full overlay showing file details and print options -->
	<!-- Uses reactive subjects for file data (no API properties needed) -->

	<view extends="lv_obj"
	      x="#nav_width"
	      height="100%"
	      style_bg_color="#panel_bg"
	      style_bg_opa="255"
	      style_border_width="0"
	      style_pad_all="0"
	      flex_flow="column"
	      clickable="true"
	      name="detail_view_root">

		<!-- HEADER BAR (full width at top) -->
    		<header_bar title="Print File" name="detail_header"/>

		<!-- CONTENT AREA (two columns) -->
		<lv_obj width="100%"
		        flex_grow="1"
		        style_bg_opa="0"
		        style_border_width="0"
		        style_pad_left="#padding_normal"
		        style_pad_right="#padding_normal"
		        style_pad_top="#padding_normal"
		        style_pad_bottom="#padding_normal"
		        flex_flow="row"
		        style_pad_gap="#gap_normal"
		        name="content_container">

			<!-- ================================================================== -->
			<!-- LEFT SECTION: Thumbnail styled like card (2/3 width)              -->
			<!-- ================================================================== -->
			<lv_obj name="thumbnail_section"
			        flex_grow="2"
			        height="100%"
			        style_bg_color="#card_bg"
			        style_border_width="0"
			        style_pad_all="0"
			        style_radius="#card_radius"
			        style_clip_corner="true"
			        scrollable="false">

				<!-- Gradient background (scaled to fill section) -->
				<lv_image name="gradient_background"
				          src="A:assets/images/thumbnail-gradient-bg.png"
				          width="100%"
				          height="100%"
				          style_bg_opa="0"
				          align="center"/>

				<!-- Thumbnail image (fills entire card background) -->
				<lv_image name="detail_thumbnail"
				          src="A:assets/images/thumbnail-placeholder.png"
				          bind_src="selected_thumbnail"
				          width="100%"
				          height="100%"
				          style_bg_opa="0"
				          align="top_mid"
				          inner_align="top_mid"/>

				<!-- METADATA OVERLAY at bottom (like card view) -->
				<lv_obj name="metadata_overlay"
				        width="100%"
				        height="100"
				        style_bg_color="#card_bg"
				        style_bg_opa="204"
				        style_border_width="0"
				        style_radius="0"
				        style_pad_left="#gap_normal"
				        style_pad_right="#gap_normal"
				        style_pad_top="#gap_normal"
				        style_pad_bottom="#gap_normal"
				        style_pad_gap="#gap_small"
				        align="bottom_mid"
				        flex_flow="column"
				        scrollable="false">

					<!-- Filename label -->
					<lv_label name="detail_filename"
					          bind_text="selected_filename"
					          width="100%"
					          height="20"
					          long_mode="dots"
					          style_text_color="#text_primary"
					          style_text_font="montserrat_16"/>

					<!-- Metadata row (horizontal layout with icons) -->
					<lv_obj width="100%"
					        style_bg_opa="0"
					        style_border_width="0"
					        style_pad_all="0"
					        style_pad_gap="#gap_normal"
					        flex_flow="row"
					        flex_grow="1">

						<!-- Print time (icon + text) -->
						<lv_obj flex_grow="1"
						        height="100%"
						        style_bg_opa="0"
						        style_border_width="0"
						        style_pad_all="0"
						        flex_flow="row"
						        style_pad_gap="6"
						        style_flex_cross_place="center">
							<icon src="mat_clock"
							      size="xs"
							      variant="accent"/>
							<lv_label name="detail_print_time"
							          bind_text="selected_print_time"
							          flex_grow="1"
							          style_text_color="#text_secondary"
							          style_text_font="montserrat_14"/>
						</lv_obj>

						<!-- Filament weight (icon + text) -->
						<lv_obj flex_grow="1"
						        height="100%"
						        style_bg_opa="0"
						        style_border_width="0"
						        style_pad_all="0"
						        flex_flow="row"
						        style_pad_gap="6"
						        style_flex_cross_place="center">
							<icon src="mat_layers"
							      size="xs"
							      variant="accent"/>
							<lv_label name="detail_filament_weight"
							          bind_text="selected_filament_weight"
							          flex_grow="1"
							          style_text_color="#text_secondary"
							          style_text_font="montserrat_14"/>
						</lv_obj>
					</lv_obj>
				</lv_obj>
			</lv_obj>

			<!-- ================================================================== -->
			<!-- RIGHT SECTION: Options and buttons (1/3 width)                    -->
			<!-- ================================================================== -->
			<lv_obj name="options_section"
			        flex_grow="1"
			        height="100%"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_all="0"
			        style_pad_gap="16"
			        flex_flow="column">

			<!-- Options card -->
			<lv_obj name="options_card"
			        width="100%"
			        flex_grow="5"
			        style_bg_color="#card_bg"
			        style_border_width="0"
			        style_radius="#card_radius"
			        style_pad_all="16"
			        flex_flow="column">

				<!-- Filament type dropdown -->
				<lv_label text="Filament Type"
				          style_text_font="montserrat_16"
				          style_text_color="#text_primary"
				          width="100%"
				          height="20"/>
				<lv_dropdown name="filament_dropdown"
				             options="PLA&#10;PETG&#10;ABS&#10;TPU&#10;Nylon&#10;ASA&#10;PC&#10;HIPS&#10;PVA&#10;Wood Fill&#10;Carbon Fiber"
				             width="100%"
				             height="#button_height"
				             style_bg_color="#card_bg_dark"
				             style_text_color="#text_primary"/>

				<!-- Automatic bed leveling checkbox -->
				<lv_checkbox name="bed_leveling_checkbox"
				             text="Automatic Bed Leveling"
				             width="100%"
				             style_text_font="montserrat_16"
				             style_text_color="#text_primary"/>
			</lv_obj>

			<!-- Button row -->
			<lv_obj name="button_row"
			        width="100%"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_all="0"
			        style_pad_gap="#button_padding"
			        flex_flow="row">

				<!-- Delete button -->
				<lv_button name="delete_button"
				           flex_grow="1"
				           height="#button_height"
				           style_bg_color="#card_bg_dark"
				           style_radius="4"
				           clickable="true">
					<lv_label text="Delete"
					          align="center"
					          style_text_font="montserrat_16"
					          style_text_color="#text_primary"/>
				</lv_button>

				<!-- Print button -->
				<lv_button name="print_button"
				           flex_grow="1"
				           height="#button_height"
				           style_bg_color="#primary_color"
				           style_radius="4"
				           clickable="true">
					<lv_label text="Print"
					          align="center"
					          style_text_font="montserrat_16"
					          style_text_color="#text_primary"/>
				</lv_button>
			</lv_obj>
			</lv_obj>
		</lv_obj>
	</view>
</component>
