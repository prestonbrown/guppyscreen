<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of GuppyScreen.

  GuppyScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GuppyScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GuppyScreen. If not, see <https://www.gnu.org/licenses/>.
-->

<component>
	<!-- Print Select Panel - Dual view: Card grid or List view -->

	<!-- Panel-specific constants -->
	<consts>
		<!-- List view dimensions -->
		<px name="list_header_height" value="48"/>
		<px name="list_row_height" value="44"/>
		<px name="list_row_gap" value="4"/>
		<px name="list_header_padding" value="8"/>
		<px name="list_sort_icon_size" value="16"/>

		<!-- Column min widths for responsive list view -->
		<px name="col_size_width" value="80"/>
		<px name="col_modified_width" value="130"/>
		<px name="col_time_width" value="90"/>

		<!-- Metadata dimensions for cards -->
		<px name="metadata_row_height" value="24"/>

		<!-- Minimum widths to prevent text crushing -->
		<px name="metadata_label_min_width" value="30"/>
	</consts>

	<view extends="lv_obj"
	      width="100%"
	      height="100%"
	      style_bg_color="#panel_bg"
	      style_pad_all="0"
	      style_pad_gap="0"
	      style_border_width="0"
	      flex_flow="column"
	      name="print_select_panel_root">

		<!-- Top bar with view toggle -->
		<lv_obj width="100%"
		        height="60"
		        style_bg_color="#panel_bg"
		        style_border_width="0"
		        style_pad_left="#nav_padding"
		        style_pad_right="#nav_padding"
		        style_pad_top="#padding_small"
		        style_pad_bottom="#padding_small"
		        flex_flow="row"
		        style_flex_main_place="end"
		        style_flex_cross_place="center">

			<!-- View toggle button (icon-only) -->
			<lv_button name="view_toggle_btn"
			           width="40"
			           height="40"
			           style_bg_opa="0"
			           style_border_width="0"
			           style_shadow_width="0"
			           style_pad_all="0">
				<icon name="view_toggle_icon"
				      src="mat_list"
				      size="md"
				      variant="primary"/>
			</lv_button>
		</lv_obj>

		<!-- Card view container (default visible) -->
		<lv_obj name="card_view_container"
		        width="100%"
		        height="100%"
		        style_bg_color="#panel_bg"
		        style_pad_all="#nav_padding"
		        style_pad_gap="#padding_normal"
		        style_border_width="0"
		        flex_flow="row_wrap"
		        scrollable="true"
		        flex_grow="1">

			<!-- Cards will be dynamically added here via C++ -->
		</lv_obj>

		<!-- List view container (initially hidden) -->
		<lv_obj name="list_view_container"
		        width="100%"
		        height="100%"
		        style_bg_color="#panel_bg"
		        style_pad_all="0"
		        style_border_width="0"
		        flex_flow="column"
		        flex_grow="1"
		        hidden="true">

			<!-- Column headers -->
			<lv_obj name="list_header"
			        width="100%"
			        height="#list_header_height"
			        style_bg_color="#panel_bg"
			        style_border_width="0"
			        style_border_side="2"
			        style_border_color="#card_bg"
			        style_pad_left="#nav_padding"
			        style_pad_right="#nav_padding"
			        style_pad_top="0"
			        style_pad_bottom="0"
			        flex_flow="row"
			        style_flex_main_place="start"
			        style_flex_cross_place="center">

				<!-- Filename header (flex-grow) -->
				<lv_button name="header_filename"
				          height="100%"
				          style_bg_opa="0"
				          style_border_width="0"
				          style_shadow_width="0"
				          style_pad_all="#list_header_padding"
				          flex_grow="1"
				          flex_flow="row"
				          style_flex_main_place="start"
				          style_flex_cross_place="center">
					<lv_label name="header_filename_label"
					          text="Filename"
					          style_text_font="#font_body"
					          style_text_color="#text_primary"
					          style_text_align="left"/>
					<icon name="header_filename_icon_up"
					      src="mat_arrow_up"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
					<icon name="header_filename_icon_down"
					      src="mat_arrow_down"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
				</lv_button>

				<!-- Size header -->
				<lv_button name="header_size"
				          width="#col_size_width"
				          height="100%"
				          style_bg_opa="0"
				          style_border_width="0"
				          style_shadow_width="0"
				          style_pad_all="#list_header_padding"
				          flex_flow="row"
				          style_flex_main_place="start"
				          style_flex_cross_place="center">
					<lv_label name="header_size_label"
					          text="Size"
					          style_text_font="#font_body"
					          style_text_color="#text_primary"
					          style_text_align="left"/>
					<icon name="header_size_icon_up"
					      src="mat_arrow_up"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
					<icon name="header_size_icon_down"
					      src="mat_arrow_down"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
				</lv_button>

				<!-- Modified header -->
				<lv_button name="header_modified"
				          width="#col_modified_width"
				          height="100%"
				          style_bg_opa="0"
				          style_border_width="0"
				          style_shadow_width="0"
				          style_pad_all="#list_header_padding"
				          flex_flow="row"
				          style_flex_main_place="start"
				          style_flex_cross_place="center">
					<lv_label name="header_modified_label"
					          text="Modified"
					          style_text_font="#font_body"
					          style_text_color="#text_primary"
					          style_text_align="left"/>
					<icon name="header_modified_icon_up"
					      src="mat_arrow_up"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
					<icon name="header_modified_icon_down"
					      src="mat_arrow_down"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
				</lv_button>

				<!-- Print Time header -->
				<lv_button name="header_print_time"
				          width="#col_time_width"
				          height="100%"
				          style_bg_opa="0"
				          style_border_width="0"
				          style_shadow_width="0"
				          style_pad_all="#list_header_padding"
				          flex_flow="row"
				          style_flex_main_place="start"
				          style_flex_cross_place="center">
					<lv_label name="header_print_time_label"
					          text="Time"
					          style_text_font="#font_body"
					          style_text_color="#text_primary"
					          style_text_align="left"/>
					<icon name="header_print_time_icon_up"
					      src="mat_arrow_up"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
					<icon name="header_print_time_icon_down"
					      src="mat_arrow_down"
					      size="xs"
					      variant="primary"
					      hidden="true"/>
				</lv_button>
			</lv_obj>

			<!-- Scrollable list rows container -->
			<lv_obj name="list_rows_container"
			        width="100%"
			        height="100%"
			        style_bg_color="#panel_bg"
			        style_pad_left="#nav_padding"
			        style_pad_right="#nav_padding"
			        style_pad_top="#gap_small"
			        style_pad_bottom="#nav_padding"
			        style_pad_gap="#gap_small"
			        style_border_width="0"
			        flex_flow="column"
			        scrollable="true"
			        flex_grow="1">

				<!-- List rows will be dynamically added here via C++ -->
			</lv_obj>
		</lv_obj>

		<!-- Empty state message (shared, initially hidden) -->
		<lv_obj name="empty_state_container"
		        width="100%"
		        height="100%"
		        style_bg_color="#panel_bg"
		        style_border_width="0"
		        style_pad_all="0"
		        align="center"
		        flex_grow="1"
		        hidden="true">

			<lv_obj width="400"
			        height="200"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_all="0"
			        align="center"
			        flex_flow="column"
			        style_flex_main_place="center"
			        style_flex_cross_place="center">

				<lv_label text="No files available for printing"
				          width="400"
				          height="32"
				          style_text_font="#font_heading"
				          style_text_color="#text_primary"
				          style_text_align="center"
				          style_pad_all="0"/>

				<lv_label text="Upload gcode files to get started"
				          width="400"
				          height="24"
				          style_text_font="#font_body"
				          style_text_color="#text_secondary"
				          style_text_align="center"
				          style_pad_all="0"
				          style_pad_top="8"/>
			</lv_obj>
		</lv_obj>
	</view>
</component>
